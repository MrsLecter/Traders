<!DOCTYPE html>
<html lang="en">

<body class="container-fluid w-100 h-100 p-0 m-0" style="background-color: #e9ecef;">

    <head>
        <%- include('../partials/head'); %>
    </head>
    <div class="container-fluid">
        <div class="row">
            <div class="col-2 h-100 p-0 m-0">
                <header>
                    <%- include('../partials/header'); %>
                </header>
            </div>
            <div class="col-10  m-0 jumbotron">
                <main>
                    <div class="container-fluid">
                        <h3>Search Database</h3>
                        <hr>
                        <form>
                            <div class="input-group mb-3">
                                <span class="input-group-text" id="inputGroup-sizing-default">Parametr</span>
                                <input name="parametr" type="text" class="form-control"
                                    aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                            </div>
                            <h5>Tables</h5>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="table" id="table" value="products">
                                <label class="form-check-label mx-3" for="table">Products</label>
                                <input class="form-check-input" type="radio" name="table" id="table" value="customers">
                                <label class="form-check-label mx-3" for="inlineRadio1">Customers</label>
                            </div>
                            <br>
                            <br>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </form>
                        <br>
                        <hr>
                        <ul>
                            <% if (typeof data==='object' && table==='products' ) { %>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th scope="col"><b>Name</b></th>
                                            <th scope="col"><b>Qt per unit</b></th>
                                            <th scope="col"><b>Price</b></th>
                                            <th scope="col"><b>Stock</b></th>
                                            <th scope="col"><b>Orders</b></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ul>
                                            <tr>
                                                <td>
                                                    <a href='/products/<%=data.dataValues.productid%>'>
                                                        <%=data.dataValues.productname%>
                                                    </a>
                                                </td>
                                                <td>
                                                    <%=data.dataValues.quantityperunit%>
                                                </td>
                                                <td>
                                                    $<%=data.dataValues.unitprice%>
                                                </td>
                                                <td>
                                                    <%=data.dataValues.unitinstock%>
                                                </td>
                                                <td>
                                                    <%=data.dataValues.unitsonorder%>
                                                </td>
                                            </tr>
                                        </ul>
                                    </tbody>
                                    <% } %>
                                </table>
                                <% if (typeof data==='object' && table==='customers' ) { %>
                                    <table class="table table-striped">

                                        <thead>
                                            <tr>
                                                <th scope="col"> </th>
                                                <th scope="col"><b>Company</b></th>
                                                <th scope="col"><b>Contact</b></th>
                                                <th scope="col"><b>Title</b></th>
                                                <th scope="col"><b>City</b></th>
                                                <th scope="col"><b>Country</b></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% if (data.length==1) { %>
                                                <tr>
                                                    <td>
                                                        <i class="bi bi-check-circle-fill"></i>
                                                    </td>
                                                    <td>
                                                        <a href='/customers/<%=data[0].dataValues.customerid%>'>
                                                            <%= data[0].dataValues.companyname%>
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <%= data[0].dataValues.contactname%>
                                                    </td>
                                                    <td>
                                                        <%= data[0].dataValues.contacttitle%>
                                                    </td>
                                                    <td>
                                                        <%= data[0].dataValues.city%>
                                                    </td>
                                                    <td>
                                                        <%= data[0].dataValues.country%>
                                                    </td>

                                                </tr>
                                                <% } %>
                                                    <% if (data.length>1) { %>
                                                        <ul>
                                                            <% for (let i=1; i <=data.length-1; i++ ) { %>

                                                                <tr>
                                                                    <td>
                                                                        <i class="bi bi-check-circle-fill"></i>
                                                                    </td>
                                                                    <td>
                                                                        <a
                                                                            href='/customers/<%=data[i].dataValues.customerid%>'>
                                                                            <%= data[i].dataValues.companyname%>
                                                                        </a>
                                                                    </td>
                                                                    <td>
                                                                        <%= data[i].dataValues.contactname%>
                                                                    </td>
                                                                    <td>
                                                                        <%= data[i].dataValues.contacttitle%>
                                                                    </td>
                                                                    <td>
                                                                        <%= data[i].dataValues.city%>
                                                                    </td>
                                                                    <td>
                                                                        <%= data[i].dataValues.country%>
                                                                    </td>

                                                                </tr>
                                                                <% } %>
                                                        </ul>
                                                        <% } %>
                                        </tbody>
                                        <% } %>
                                    </table>
                                    <br>
                    </div>
                </main>
            </div>
        </div>
    </div>
    <footer>
        <%- include('../partials/footer'); %>
    </footer>
</body>

</html>